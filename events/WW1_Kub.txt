add_namespace = ww1_kub

#Soviet Invasion - SOV
country_event = {
	title = ww1_kub.1.t
	desc = ww1_kub.1.d
	id = ww1_kub.1
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
    trigger = {
		tag = SOV
		KUB = {
			has_capitulated = yes
		}
	}
	mean_time_to_happen = {
		days = 3
	}
	option = {
		name = ww1_kub.1.a	
		hidden_effect = {
			KUB = {
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				add_popularity = {
					ideology = communism
					popularity = 0.25
				}
				set_cosmetic_tag = SOV_kuban_sr
			}
			SOV = {
				puppet = KUB
				# dont remove, might remove puppeting later
				add_to_faction = KUB
			}
			SOV = {
				end_puppet = KUB
			}
			BSR = {
				set_province_controller = 3752
				set_province_controller = 719
			}
		}
	}
}
#black sea sr 
country_event = {
	title = ww1_kub.2.t
	desc = ww1_kub.2.d
	id = ww1_kub.2
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
    is_triggered_only = yes
	option = {
		name = ww1_kub.2.a	
		hidden_effect = {
			KUB = {
				start_civil_war = {
					ideology = communism
					size = 0.2
					capital = 3698
					states = {
						233
					}
					keep_all_characters = yes
					set_country_flag = KUB_black_sea_sr
					set_cosmetic_tag = SOV_black_sea_sr
					division_template = {
						name = "Red Guards"
						division_names_group = SOV_INF_01
						regiments = {
							militia = { x = 0 y = 0 }
							militia = { x = 0 y = 1 }
							militia = { x = 1 y = 0 }
							militia = { x = 1 y = 1 }
						}
					}
					233 = {
						create_unit = {
							division = "division_template = \"Red Guards\" start_experience_factor = 0.2" 
							owner = BSR
							allow_spawning_on_enemy_provs = yes
							count = 1
						}
					}
				}
			}
			234 = {
				remove_core_of = BSR
			}
			SOV = {
				# puppet = BSR
				# dont remove, might remove puppeting later
				add_to_faction = BSR
			}
		}
	}
}
# Mountain republic, lets throw it in here bcs same establishment time circa
country_event = {
	title = ww1_kub.3.t
	desc = ww1_kub.3.d
	id = ww1_kub.3
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
    is_triggered_only = yes
	option = {
		name = ww1_kub.3.a	
		hidden_effect = {
			create_dynamic_country = {
				original_tag = SOV
				copy_tag = SOV
				add_political_power = 100
				transfer_state = 232
				add_popularity = {
					ideology = communism
					popularity = 1
				}
				set_country_flag = SOV_terek_sr
				set_cosmetic_tag = SOV_terek_sr
				division_template = {
					name = "Red Guards"
					division_names_group = SOV_INF_01
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
					}
				}
				232 = {
					create_unit = {
						division = "division_template = \"Red Guards\" start_experience_factor = 0.2" 
						owner = TSR
						allow_spawning_on_enemy_provs = yes
						count = 2
					}
				}
				every_state = {
					limit = {
						NOT = {
							is_controlled_by = SSR
						}
					}
					remove_core_of = SSR
				}
			}
			SOV = {
				# puppet = TSR
				# dont remove, might remove puppeting later
				add_to_faction = TSR
			}
		}
	}
}
#testtesttest stavropol sr -- WORKING
country_event = {
	title = ww1_kub.4.t
	desc = ww1_kub.4.d
	id = ww1_kub.4
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
    is_triggered_only = yes
	option = {
		name = ww1_kub.4.a	
		hidden_effect = {
			create_dynamic_country = {
				original_tag = SOV
				copy_tag = SOV
				add_political_power = 100
				transfer_state = 235
				set_country_flag = stavropol_sr
				set_cosmetic_tag = SOV_stavropol_sr
				add_popularity = {
					ideology = communism
					popularity = 1
				}
				division_template = {
					name = "Red Guards"
					division_names_group = SOV_INF_01
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
					}
				}
				235 = {
					create_unit = {
						division = "division_template = \"Red Guards\" start_experience_factor = 0.2" 
						owner = SSR
						allow_spawning_on_enemy_provs = yes
						count = 2
					}
				}
				every_state = {
					limit = {
						NOT = {
							is_controlled_by = SSR
						}
					}
					remove_core_of = SSR
				}
			}
			235 = {
				remove_core_of = SOV
			}
			SOV = {
				# puppet = SSR
				# dont remove, might remove puppeting later
				add_to_faction = SSR
			}
		}
	}
}

#amur sr -- WORKING
country_event = {
	title = ww1_kub.5.t
	desc = ww1_kub.5.d
	id = ww1_kub.5
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
    is_triggered_only = yes
	option = {
		name = ww1_kub.5.a	
		hidden_effect = {
			create_dynamic_country = {
				original_tag = SOV
				copy_tag = SOV
				add_political_power = 100
				set_country_flag = sov_amur_sr
				set_politics = {
					ruling_party = communism
					elections_allowed = no
					long_name = TAG_party_long
					name = TAG_party
				}
				add_popularity = {
					ideology = communism
					popularity = 1
				}
				set_cosmetic_tag = SOV_amur_sr
				transfer_state = 561
				division_template = {
					name = "Red Guards"
					division_names_group = SOV_INF_01
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
					}
				}
				561 = {
					create_unit = {
						division = "division_template = \"Red Guards\" start_experience_factor = 0.2" 
						owner = SAR
						allow_spawning_on_enemy_provs = yes
						count = 2
					}
				}
				every_state = {
					limit = {
						NOT = {
							is_controlled_by = SAR
						}
					}
					remove_core_of = SAR
				}
			}
			SOV = {
				# puppet = SAR
				# dont remove, might remove puppeting later
				add_to_faction = SAR
			}
		}
	}
}

#kuban-black sea sr
country_event = {
	title = ww1_kub.6.t
	desc = ww1_kub.6.d
	id = ww1_kub.6
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
    is_triggered_only = yes
	option = {
		name = ww1_kub.6.a	
		hidden_effect = {
			annex_country = {
				target = BSR
				transfer_troops = yes
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = BSR
					}
				}
				add_core_of = KUB
				remove_core_of = BSR
			}
			set_cosmetic_tag = SOV_kuban_black_sea_sr
			country_event = {
				id = ww1_kub.7
				days = 1
			}
		}
	}
}

#north caucasus sr 
country_event = {
	title = ww1_kub.7.t
	desc = ww1_kub.7.d
	id = ww1_kub.7
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
    is_triggered_only = yes
	option = {
		name = ww1_kub.7.a	
		hidden_effect = {
			annex_country = {
				target = TSR
				transfer_troops = yes
			}
			annex_country = {
				target = SSR
				transfer_troops = yes
			}
			set_cosmetic_tag = SOV_north_caucasus_sr
			every_state = {
				limit = {
					OR = {
						is_core_of = SSR
						is_core_of = TSR
					}
				}
				add_core_of = KUB
				remove_core_of = SSR
				remove_core_of = TSR
			}
		}
	}
}

#north caucasus sr gets annexed
country_event = {
	title = ww1_kub.7.t
	desc = ww1_kub.7.d
	id = ww1_kub.7
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
    trigger = {
		tag = SOV
		KUB = {
			is_in_faction_with = SOV
			surrender_progress > 0.9
		}
	}
	mean_time_to_happen = {
		days = 3
	}
	option = {
		name = ww1_kub.7.a	
		hidden_effect = {
			annex_country = {
				target = KUB
				transfer_troops = yes
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = KUB
					}
				}
				add_core_of = SOV
				remove_core_of = KUB
			}
		}
	}
}